## 一、事务操作

### 1. 查看事务提交方式

```sql
SELECT @@autocommit;
```

### 2. 设置事务提交方式

```sql
SET @@autocommit = 0;
```

### 3. 开启事务

```sql
START TRANSACTION;
```

```sql
BEGIN;
```

### 4. 提交事务

```sql
COMMIT;
```

### 5. 回滚事务

```sql
ROLLBACK;
```

## 二、事务的四大特性（ACID）

### 1. 原子性

```text
事务是不可分割的最小操作单元，要么全部成功，要么全部失败
```

### 2. 一致性

```text
事务完成时，必须使所有的数据都保持一致状态
```

### 3. 隔离性

```text
数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行
```

### 4. 持久性

```text
事务一旦提交或回滚，它对数据库中的数据的改变就是永久的
```

## 三、并发事务问题

### 1. 脏读

```text
一个事务读到另一个事务还没有提交的数据
```

### 2. 不可重复读

```text
一个事务先后读取同一条记录，但两次读取的数据不同
```

### 3. 幻读

```text
一个事务按照条件查询数据时没有对应的数据行，但是在插入数据时，又发现这行数据已经存在
```

## 四、事务隔离级别

### 1. 各隔离级别具有的并发问题

- `Read uncommitted`：脏读、不可重复读、幻读  
- `Read committed`：不可重复读、幻读  
- `Repeatable Read`：幻读  
- `Serializable`：  无

### 2. 查看事务隔离级别

```sql
SELECT @@TRANSACTION_ISOLATION;
```

### 3. 设置事务隔离级别

```sql
SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL 隔离级别;
```
