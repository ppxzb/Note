## 一、体系结构

```text
连接层、服务层、引擎层、存储层
```

## 二、语法

### 1. 创建表时指定存储引擎

```sql
CREATE TABLE 表名(
  ...
) ENGINE = 存储引擎;
```

### 2. 查看当前数据库支持的存储引擎

```sql
SHOW ENGINES;
```

## 三、存储引擎类型

### 1. InnoDB

#### 特点

```text
DML操作遵循ACID模型，支持事务
```

```text
行级锁，提高并发访问性能
```

```text
支持外键FOREIGN KEY约束，保证数据的完整性和正确性
```

#### 文件

```text
xxx.ibd：xxx代表的是表名，innoDB引擎的每张表都会对应这样一个表空间文件，存储该表的表结构（frm、sdi）、数据和索引
```

```text
参数：innodb_file_per_table
```

### 2. MyISAM

#### 特点

```text
不支持事务，不支持外键
```

```text
支持表锁，不支持行锁
```

```text
访问速度快
```

#### 文件

```text
xxx.sdi：存储表结构信息
```

```text
xxx.MYD：存储数据
```

```text
xxx.MYI：存储索引
```

### 3. Memory

#### 特点

```text
内存存放
```

```text
hash索引
```

#### 文件

```text
xxx.sdi：存储表结构信息
```

## 四、存储引擎特点

| 特点 | InnoDB | MyISAM | Memory |
|---|---|---|---|
| 存储限制 | 64TB | 有 | 有 |
| 事务安全 | 支持 | - | - |
| 锁机制 | 行锁 | 表锁 | 表锁 |
| B+tree索引 | 支持 | 支持 | 支持 |
| Hash索引 | - | - | 支持 |
| 全文索引 | 支持 | 支持 | - |
| 空间使用 | 高 | 低 | N/A |
| 内存使用 | 高 | 低 | 中 |
| 批量插入速度 | 低 | 高 | 高 |
| 支持外键 | 支持 | - | - |

## 五、存储引擎的选择

### 1. InnoDB

```text
Mysql的默认存储引擎，支持事务、外键。如果应用对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询之外，还包含很多的更新、删除操作，那么该引擎是比较合适的选择
```

### 2. MyISAM

```text
如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么选择这个存储引擎是非常合适的
```

### 3. Memory

```text
将所有数据保存在内存中，访问速度快，通常用于临时表及缓存。该引擎的缺陷就是对表的大小有限制，太大的表无法缓存在内存中，而且无法保障数据的安全性
```
